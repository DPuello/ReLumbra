<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="css/Carrusel1.css">

    <style>
        p{
            margin: 5%;
        }
        h1{
            text-align: center;
        }
        .project{
            opacity: 0;
            transition: all 1s ease-out;
        }
        .fade-in{
            opacity: 1;

        }
        .main{
            position: relative;
            background-color: #fff;
        }
        #amarillo{
            width: 100vw;
            height: 30vh;
            background: yellow;
        }
        .contPara{
            position: relative;
            padding: 5% 0;
            overflow: hidden;
        }
        .parallax{
            background: url('https://images.unsplash.com/photo-1511447333015-45b65e60f6d5?ixlib=rb-1.2.1&w=1000&q=80');
            background-repeat: no-repeat;
            background-size: cover;
            position: absolute;
            width: 100%;
            height: 100vh;
            z-index: -1;
        }
        #c {
        height: 110px;
        overflow: hidden;
        }
        #b {
        height: 150px;
        width: 150px;
        border: 30px solid blue;
        border-radius: 50%;
        margin-top: -50px;
        margin-left: -150px;
        }
    </style>
    
</head>
<body>
    <span id="amarillo"></span>
  <div id="container" class="main"></div>
  <div id = "project01" class="project">
      <p>
          Lorem ipsum dolor, sit amet consectetur adipisicing elit. Doloremque aut debitis animi fugiat quidem in, sapiente aliquam, dolorem placeat odit suscipit sint nobis facere cum incidunt, quaerat omnis. Deleniti, nesciunt.
          Laboriosam autem numquam praesentium culpa mollitia obcaecati fugiat, aliquam nobis vero voluptatem asperiores assumenda cum aspernatur voluptate temporibus. Reiciendis voluptas qui in ad. Eligendi quasi harum magnam, odit debitis cupiditate.
          A deleniti dolorum ratione facilis, nostrum itaque. Aperiam, quas nisi molestiae dolorum animi labore a fugiat est, sunt voluptatum voluptas exercitationem, ea eum. Sequi, et eum officia corrupti mollitia totam?
          Repudiandae itaque iure blanditiis tempora iusto nulla, ratione assumenda sed laudantium quia officia reprehenderit alias quasi illo eligendi, ducimus nostrum cumque adipisci expedita facere. Distinctio nemo debitis explicabo? Reprehenderit, autem.
      </p>
  </div>
  <div id = "project02" class="project">
      <h1>blah blah blah</h1>
  </div>
  <div id="project03" class="project">
    <p>
      Lorem ipsum dolor, sit amet consectetur adipisicing elit. Facilis voluptas ab reiciendis nihil dolores saepe dicta eaque dolore sunt quia officia omnis ducimus, placeat vel voluptate maiores? Modi, iste qui.Recusandae fugit, autem vel molestias perspiciatis animi et, nulla explicabo porro, numquam eos consequatur repudiandae rerum cumque quia? Dicta aliquam numquam unde ipsum aut veritatis beatae modi eveniet necessitatibus dolorem.
    </p>
  </div>
  <div id="c">
        <div id="b"></div>
      </div>
  <div>
      <img src="images/ayuda4.png" alt="">
  </div>
  <div>
      <img src="images/delfin.png" alt="">
  </div>
  <div class="contPara">
      <div class="parallax"></div>
      <div>
      <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Provident accusamus totam quidem repudiandae eos, doloribus atque facere, optio obcaecati asperiores fugit ratione at temporibus, ipsum iure debitis id similique dignissimos?
          Aliquid ut voluptatum alias nam! Doloribus, nesciunt et. Temporibus, facere aliquid. A, expedita. Saepe architecto enim minima aut? Nulla assumenda hic possimus explicabo at quod magnam facilis sequi sed iure.
          Odio corporis laboriosam expedita maxime incidunt consequatur dolorem harum doloremque optio. Quasi consectetur quidem perferendis sed incidunt quos, quam voluptatibus animi harum quod aut consequatur excepturi rem aperiam et explicabo.
      </p>
    </div>
  </div>
  <div>
      <img src="images/impacto2.png" alt="">
  </div>
  <div>
      <img src="images/ballena.png" alt="">
  </div>

  <script src="js/three.min.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/GLTFLoader.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>

  <script>
  console.clear();

        var renderer, scene, camera, distance, raycaster, projector;
        var container = document.getElementById('container');
        var distance = 400;

        function init() {
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x140b33, 1);
        container.appendChild(renderer.domElement);

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.2, 25000);
        camera.position.set(100, 100, 2000);
        scene.add(camera);

        light = new THREE.PointLight(0xffffff, 1, 4000);
        light.position.set(50, 0, 0);
        light_two = new THREE.PointLight(0xffffff, 1, 4000);
        light_two.position.set(-100, 800, 800);
        lightAmbient = new THREE.AmbientLight(0x404040);
        scene.add(light, light_two, lightAmbient);


        createSpheres();
        createDiamond();
        createSpace();

        var loading = new THREE.GLTFLoader();



        // Load a glTF resource
        loading.load(
            // resource URL
            'untitled.gltf',
            // called when the resource is loaded
            function ( gltf ) {

                scene.add( gltf.scene );

                gltf.animations; // Array<THREE.AnimationClip>
                gltf.scene; // THREE.Scene
                gltf.scenes; // Array<THREE.Scene>
                gltf.cameras; // Array<THREE.Camera>
                gltf.asset; // Object

            },

        );


        document.addEventListener('mousemove', onMouseMove, false);
        window.addEventListener('resize', onWindowResize, false);
        renderer.render(scene, camera);

        }



        function createSpheres() {
        spheres = new THREE.Object3D();
        for (var i = 0; i < 80; i++) {
            var sphere = new THREE.SphereGeometry(4, Math.random() * 12, Math.random() * 12);
            var material = new THREE.MeshPhongMaterial({
                color: Math.random() * 0xff00000 - 0xff00000,
                shading: THREE.FlatShading,
            })

            var particule = new THREE.Mesh(sphere, material);
            particule.position.x = Math.random() * distance * 10;
            particule.position.y = Math.random() * -distance * 6;
            particule.position.z = Math.random() * distance * 4;
            particule.rotation.y = Math.random() * 2 * Math.PI;
            particule.scale.x = particule.scale.y = particule.scale.z = Math.random() * 12 + 5;
            spheres.add(particule);
        }

        spheres.position.y = 1200;
        spheres.position.x = -2000;
        spheres.position.z = -100;
        spheres.rotation.y = Math.PI * 600;
        scene.add(spheres);
        };

        function createDiamond() {
        diamondsGroup = new THREE.Object3D();
        var loader = new THREE.ObjectLoader();
        loader.load('https://raw.githubusercontent.com/PavelLaptev/test-rep/master/threejs-post/diamond.json', function(geometry) {
            for (var i = 0; i < 60; i++) {
                var material = new THREE.MeshPhongMaterial({
                    color: Math.random() * 0xff00000 - 0xff00000,
                    shading: THREE.FlatShading
                });
                var diamond = new THREE.Mesh(geometry, material);
                diamond.position.x = Math.random() * -distance * 6;
                diamond.position.y = Math.random() * -distance * 2;
                diamond.position.z = Math.random() * distance * 3;
                diamond.rotation.y = Math.random() * 2 * Math.PI;
                diamond.scale.x = diamond.scale.y = diamond.scale.z = Math.random() * 50 + 10;
                diamondsGroup.add(diamond);
            }

            diamondsGroup.position.x = 1400;
            diamondsGroup.position.y = 400;
            scene.add(diamondsGroup);
            renderer.render(scene, camera);
        });
        };

        function createSpace() {

        dots = new THREE.Object3D();

        for (var i = 0; i < 420; i++) {
            var circleGeometry = new THREE.SphereGeometry(2, Math.random() * 5, Math.random() * 5);
            var material = new THREE.MeshBasicMaterial({
                color: Math.random() * 0xff00000 - 0xff00000,
                shading: THREE.FlatShading,
            })
            var circle = new THREE.Mesh(circleGeometry, material);
            material.side = THREE.DoubleSide;

            circle.position.x = Math.random() * -distance * 60;
            circle.position.y = Math.random() * -distance * 6;
            circle.position.z = Math.random() * distance * 3;
            circle.rotation.y = Math.random() * 2 * Math.PI;
            circle.scale.x = circle.scale.y = circle.scale.z = Math.random() * 6 + 5;
            dots.add(circle);
        }

        dots.position.x = 7000;
        dots.position.y = 900;
        dots.position.z = -2000;
        dots.rotation.y = Math.PI * 600;
        dots.rotation.z = Math.PI * 500;

        scene.add(dots);
        };

        function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        renderer.setSize(window.innerWidth, window.innerHeight);
        camera.updateProjectionMatrix();
        };

        function onMouseMove(event) {
        mouseX = event.clientX - window.innerWidth / 2;
        mouseY = event.clientY - window.innerHeight / 2;
        camera.position.x += (mouseX - camera.position.x) * 0.005;
        camera.position.y += (mouseY - camera.position.y) * 0.005;
        camera.lookAt(scene.position);
        };

        function animate() {
        requestAnimationFrame(animate);
        render();
        };

        function render() {
        var timer = 0.00001 * Date.now();

        for (var i = 0, l = diamondsGroup.children.length; i < l; i++) {
            var object = diamondsGroup.children[i];
            object.position.y = 500 * Math.cos(timer + i);
            object.rotation.y += Math.PI / 500;
        }

        for (var i = 0, l = spheres.children.length; i < l; i++) {
            var object = spheres.children[i];
            object.rotation.y += Math.PI / 60;
            if (i < 20) {
                object.rotation.y -= Math.PI / 40;
            }
        }

        renderer.render(scene, camera);
        };

        init();
        animate();
  </script>

<style>
    #container{
        z-index: -1;
    }
</style>

<script>
    $(document).ready(function(){
        var controller = new ScrollMagic.Controller();

        var pinIntro = new ScrollMagic.Scene({
            triggerElement: '#amarillo',
            triggerHook: 0,
            duration: '30%'
        })
        .setPin('#amarillo', {pushFollowers: false})
        .addTo(controller);

        var slideParallax = new ScrollMagic.Scene({
            triggerElement: '.contPara',
            triggerHook: 1,
            duration: '130%'
        })
        .setTween(TweenMax.from('.parallax', 1, {y: '-100%', ease:Power0.easeNone}))
        .addIndicators()
        .addTo(controller);

        $('.project').each(function(){
            var ourScene = new ScrollMagic.Scene({
            triggerElement: this,
            //duration: 400,
            triggerHook: 0.8
        })
        .setClassToggle(this,    'fade-in')
        .addIndicators()
        .addTo(controller);
        });

        
    });
</script>


</body>
</html>